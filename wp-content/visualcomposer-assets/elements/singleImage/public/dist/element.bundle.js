webpackJsonp([1],{"./singleImage/component.js":function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/babel-runtime/helpers/extends.js"),s=i(a),o=n("./node_modules/babel-runtime/helpers/typeof.js"),l=i(o),r=n("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=i(r),g=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=i(g),p=n("./node_modules/babel-runtime/helpers/createClass.js"),d=i(p),m=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=i(m),b=n("./node_modules/babel-runtime/helpers/inherits.js"),v=i(b),f=n("./node_modules/react/react.js"),y=i(f),z=n("./node_modules/vc-cake/index.js"),w=i(z),x=w["default"].getService("api"),k=(w["default"].getService("cook"),function(e){function t(e){(0,u["default"])(this,t);var n=(0,h["default"])(this,(t.__proto__||(0,c["default"])(t)).call(this,e));return n.mounted=!1,n.getCustomSizeImage=n.getCustomSizeImage.bind(n),n.insertImage=n.insertImage.bind(n),n.setCustomSizeState=n.setCustomSizeState.bind(n),n}return(0,v["default"])(t,e),(0,d["default"])(t,[{key:"componentDidMount",value:function(){return this.mounted=!0,t.imgProps["data-img-src"]=this.getImageUrl(this.props.atts.image,"full"),t.imgProps.alt=this.props.atts.image&&this.props.atts.image.alt?this.props.atts.image.alt:"",t.imgProps.title=this.props.atts.image&&this.props.atts.image.title?this.props.atts.image.title:"","full"===this.props.atts.size&&"round"!==this.props.atts.shape||void(this.props.atts.image&&!this.props.atts.image.id&&(this.props.atts.size?this.props.atts.size.match(/\d*(x)\d*/)?this.setCustomSizeState(this.props.atts.image,this.props.atts.size,"round"===this.props.atts.shape):"full"===this.props.atts.size?this.checkImageSize(this.props.atts.image,this.setCustomSizeState,"round"===this.props.atts.shape):this.setCustomSizeState(this.props.atts.image,this.checkRelatedSize(this.props.atts.size),"round"===this.props.atts.shape):this.checkImageSize(this.props.atts.image,this.setCustomSizeState,"round"===this.props.atts.shape)))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"componentWillReceiveProps",value:function(e){return t.imgProps["data-img-src"]=this.getImageUrl(e.atts.image,"full"),t.imgProps.alt=e.atts.image&&e.atts.image.alt?e.atts.image.alt:"string"==typeof e.atts.image?"Single Image":"",t.imgProps.title=e.atts.image&&e.atts.image.title?e.atts.image.title:"string"==typeof e.atts.image?"Single Image":"","full"===e.atts.size&&"round"!==e.atts.shape?(this.setState({imgSize:null}),!0):void(e.atts.image&&!e.atts.image.id?e.atts.size?e.atts.size.match(/\d*(x)\d*/)?this.setCustomSizeState(e.atts.image,e.atts.size,"round"===e.atts.shape):"full"===e.atts.size?this.checkImageSize(e.atts.image,this.setCustomSizeState,"round"===e.atts.shape):this.setCustomSizeState(e.atts.image,this.checkRelatedSize(e.atts.size),"round"===e.atts.shape):this.checkImageSize(e.atts.image,this.setCustomSizeState,"round"===e.atts.shape):this.setState({imgSize:null}))}},{key:"checkImageSize",value:function(e,t,n,i){var a=new window.Image;a.onload=function(){var i={width:a.width,height:a.height};t(e,i,n)},a.src=this.getImageUrl(e,i)}},{key:"getPublicImage",value:function(e){var t=this.props.atts.metaAssetsPath;return e?e.match("^(https?:)?\\/\\/?")?e:t+e:""}},{key:"getImageUrl",value:function(e,t){var n=this;if(!e)return null;var i=void 0;if(t&&e&&e[t])i=e[t];else if(e instanceof Array){var a=[];e.forEach(function(e){var t=e&&e.full&&e.id?e.full:e&&e.full?n.getPublicImage(e.full):n.getPublicImage(e);a.push(t)}),i=a}else i=e&&e.full&&e.id?e.full:e&&e.full?this.getPublicImage(e.full):this.getPublicImage(e);return i}},{key:"parseSize",value:function(e,t){if("string"==typeof e?e=e.replace(/\s/g,"").replace(/px/g,"").toLowerCase().split("x"):"object"===("undefined"==typeof e?"undefined":(0,l["default"])(e))&&(e=[e.width,e.height]),t){var n=e[0]>=e[1]?e[1]:e[0];e={width:n,height:n}}else e={width:e[0],height:e[1]};return e}},{key:"getCustomSizeImage",value:function(e,t,n){var i=this,a=e.id;t=this.parseSize(t,n),w["default"].getService("dataProcessor").appServerRequest({"vcv-action":"elements:imageController:customSize:adminNonce","vcv-image-id":a,"vcv-size":t.width+"x"+t.height,"vcv-nonce":window.vcvNonce,"vcv-source-id":window.vcvSourceID}).then(function(e){var t=JSON.parse(e);i.insertImage(t.img.imgUrl)})}},{key:"insertImage",value:function(e){var n=this,i=new window.Image;i.onload=function(){n.mounted&&n.refs.imageContainer?(n.refs.imageContainer.innerHTML="",n.refs.imageContainer.appendChild(i),w["default"].env("iframe").vcv.trigger("singleImageReady"),"round"===n.props.atts.shape?n.refs.imageContainer.classList.add("vce-single-image--border-round"):n.refs.imageContainer.classList.remove("vce-single-image--border-round")):console.warn("Single image ref hasn't loaded yet.")},i.src=e,i.setAttribute("data-img-src",t.imgProps["data-img-src"]),i.setAttribute("alt",t.imgProps.alt),i.setAttribute("title",t.imgProps.title),i.className="vce-single-image"}},{key:"checkRelatedSize",value:function(e){var n="";return window.vcvImageSizes&&window.vcvImageSizes[e]?n=window.vcvImageSizes[e]:t.imageSizes[e]&&(n=t.imageSizes[e]),n}},{key:"setCustomSizeState",value:function(e,t,n){var i=this.getImageUrl(e),a=this.parseSize(t,n);this.setState({imgSize:{width:a.width+"px",backgroundImage:a.width?"url("+i+")":""}})}},{key:"render",value:function(){var e=this.props,n=e.id,i=e.atts,a=e.editor,o=i.image,l=i.shape,r=i.clickableOptions,c=i.customClass,g=i.size,u=i.alignment,p=i.metaCustomId,d="vce-single-image-container",m="vce vce-single-image-wrapper",h="vce-single-image-inner",b={},v={},f={},z="div",w=this.getImageUrl(o),x=t.imgProps,k=w;if(g=g.replace(/\s/g,"").replace(/px/g,"").toLowerCase(),o&&o.id&&(g&&g.match(/\d*(x)\d*/)?this.getCustomSizeImage(o,g,"round"===l):"round"===l?this.checkImageSize(o,this.getCustomSizeImage,!0,g):k=this.getImageUrl(o,g)),this.state&&this.state.imgSize&&(h+=" vce-single-image--size-custom"),"string"==typeof c&&c&&(d+=" "+c),"url"===r&&o.link&&o.link.url){z="a";var S=o.link,I=S.url,C=S.title,A=S.targetBlank,j=S.relNofollow;b={href:I,title:C,target:A?"_blank":void 0,rel:j?"nofollow":void 0}}else"imageNewTab"===r?(z="a",b={href:w,target:"_blank"}):"lightbox"===r?(z="a",b={href:w,"data-lightbox":"lightbox-"+n}):"zoom"===r&&(h+=" vce-single-image-zoom-container");u&&(d+=" vce-single-image--align-"+u),"rounded"===l&&(h+=" vce-single-image--border-rounded"),"round"===l&&(h+=" vce-single-image--border-round"),b.key="customProps:"+n+"-"+k+"-"+r+"-"+l+"-"+g,p&&(v.id=p),b.style=this.state?this.state.imgSize:null;var P=this.applyDO("all"),_=null;return o&&o.caption&&(_=y["default"].createElement("figcaption",null,o.caption)),y["default"].createElement("div",(0,s["default"])({className:d},a,v),y["default"].createElement("div",(0,s["default"])({className:m},f,{id:"el-"+n},P),y["default"].createElement("figure",null,y["default"].createElement(z,(0,s["default"])({},b,{className:h,ref:"imageContainer"}),y["default"].createElement("img",(0,s["default"])({className:"vce-single-image",src:k},x))),_)))}}]),t}(x.elementComponent));k.imageSizes={thumbnail:{height:"150",width:"150"},medium:{height:"300",width:"300"},large:{height:"1024",width:"1024"}},k.imgProps={},t["default"]=k},0:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var a=n("./node_modules/vc-cake/index.js"),s=i(a),o=n("./singleImage/component.js"),l=i(o),r=s["default"].getService("cook").add;r(n("./singleImage/settings.json"),function(e){e.add(l["default"])},{css:n("./node_modules/raw-loader/index.js!./singleImage/styles.css"),editorCss:n("./node_modules/raw-loader/index.js!./singleImage/editor.css")},"")},"./singleImage/settings.json":function(e,t){e.exports={image:{type:"attachimage",access:"public",value:"single-image.jpg",options:{label:"Image",multiple:!1,defaultValue:"single-image.jpg",onChange:{rules:{clickableOptions:{rule:"value",options:{value:"url"}}},actions:[{action:"attachImageUrls"}]},url:!1}},shape:{type:"buttonGroup",access:"public",value:"square",options:{label:"Shape",values:[{label:"Square",value:"square",icon:"vcv-ui-icon-attribute-shape-square"},{label:"Rounded",value:"rounded",icon:"vcv-ui-icon-attribute-shape-rounded"},{label:"Round",value:"round",icon:"vcv-ui-icon-attribute-shape-round"}]}},designOptions:{type:"designOptions",access:"public",value:{},options:{label:"Design Options"}},editFormTab1:{type:"group",access:"protected",value:["clickableOptions","image","shape","size","alignment","metaCustomId","customClass"],options:{label:"General"}},metaEditFormTabs:{type:"group",access:"protected",value:["editFormTab1","designOptions"]},relatedTo:{type:"group",access:"protected",value:["General"]},metaOrder:{type:"number",access:"protected",value:4},customClass:{type:"string",access:"public",value:"",options:{label:"Extra class name",description:"Add an extra class name to the element and refer to it from Custom CSS option."}},size:{type:"string",access:"public",value:"large",options:{label:"Size",description:"Enter image size (Example: 'thumbnail', 'medium', 'large', 'full' or other sizes defined by theme). Alternatively enter size in pixels (Example: 200x100 (Width x Height))."}},clickableOptions:{type:"dropdown",access:"public",value:"",options:{label:"OnClick action",values:[{label:"None",value:""},{label:"Lightbox",value:"lightbox"},{label:"Zoom",value:"zoom"},{label:"Open Image in New Tab",value:"imageNewTab"},{label:"Link selector",value:"url"}]}},alignment:{type:"buttonGroup",access:"public",value:"left",options:{label:"Alignment",values:[{label:"Left",value:"left",icon:"vcv-ui-icon-attribute-alignment-left"},{label:"Center",value:"center",icon:"vcv-ui-icon-attribute-alignment-center"},{label:"Right",value:"right",icon:"vcv-ui-icon-attribute-alignment-right"}]}},assetsLibrary:{access:"public",type:"string",value:["animate"]},metaBackendLabels:{type:"group",access:"protected",value:[{value:["clickableOptions"]},{value:["image"]}]},metaCustomId:{type:"customId",access:"public",value:"",options:{label:"Element ID",description:"Apply unique Id to element to link directly to it by using #your_id (for element id use lowercase input only)."}},tag:{access:"protected",type:"string",value:"singleImage"},metaPublicJs:{access:"protected",type:"string",value:{libraries:[{rules:{clickableOptions:{rule:"value",options:{value:"lightbox"}}},libPaths:"public/dist/lightbox.min.js"},{rules:{clickableOptions:{rule:"value",options:{value:"zoom"}}},libPaths:["public/dist/jquery.zoom.min.js","public/dist/singleImage.min.js"]}]}}}},"./node_modules/raw-loader/index.js!./singleImage/editor.css":function(e,t){e.exports=".vce-single-image-container {\n  min-height: 1em;\n}\n"},"./node_modules/raw-loader/index.js!./singleImage/styles.css":function(e,t){e.exports="a.vce-single-image-inner {\n  color: transparent;\n  border-bottom: 0;\n  text-decoration: none;\n}\n\n.vce-single-image-inner {\n  display: inline-block;\n  vertical-align: top;\n}\n\n.vce-single-image-wrapper {\n  display: inline-block;\n  max-width: 100%;\n  overflow: hidden;\n  vertical-align: top;\n}\n\n.vce-single-image-wrapper img {\n  vertical-align: top;\n}\n\n.vce-single-image--border-rounded {\n  border-radius: 5px;\n  overflow: hidden;\n}\n\n.vce-single-image--border-round {\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.vce-single-image--size-custom {\n  background-size: cover;\n  background-position: center;\n  max-width: 100%;\n}\n\n.vce-single-image--size-custom::after {\n  content:'';\n  display: block;\n  padding-bottom: 66.66%;\n}\n\n.vce-single-image--border-round.vce-single-image--size-custom::after {\n  padding-bottom: 100%;\n}\n\n.vce-single-image--size-custom .vce-single-image {\n  display: none;\n}\n\n.vce-single-image--align-center {\n  text-align: center;\n}\n\n.vce-single-image--align-right {\n  text-align: right;\n}\n\n.vce-single-image--align-left {\n  text-align: left;\n}\n\n.vce-single-image-wrapper figure {\n  margin: 0;\n}\n\n.vce-single-image-wrapper figcaption {\n  font-style: italic;\n}\n\n/* =====  Lightbox  ===== */\n/* Preload images */\nbody:after {\n  content: url('public/close.png') url('public/loading.gif') url('public/prev.png') url('public/next.png');\n  display: none;\n}\n\nbody.vce-lb-disable-scrolling {\n  overflow: hidden;\n}\n\n.vce-lightbox-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 9999;\n  background-color: black;\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=80);\n  opacity: 0.8;\n  display: none;\n}\n\n.vce-lightbox {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  z-index: 10000;\n  text-align: center;\n  line-height: 0;\n  font-weight: normal;\n}\n\n.vce-lightbox .vce-lb-image {\n  display: block;\n  height: auto;\n  max-width: inherit;\n  border-radius: 3px;\n  transition: none;\n}\n\n.vce-lightbox a img {\n  border: none;\n}\n\n.vce-lb-outer-container {\n  position: relative;\n  background-color: white;\n  *zoom: 1;\n  width: 250px;\n  height: 250px;\n  margin: 0 auto;\n  border-radius: 4px;\n}\n\n.vce-lb-outer-container:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n.vce-lb-loader {\n  position: absolute;\n  top: 43%;\n  left: 0;\n  height: 25%;\n  width: 100%;\n  text-align: center;\n  line-height: 0;\n}\n\n.vce-lb-cancel {\n  display: block;\n  width: 32px;\n  height: 32px;\n  margin: 0 auto;\n  background: url('public/loading.gif') no-repeat;\n}\n\n.vce-lb-nav {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index: 10;\n}\n\n.vce-lb-container > .nav {\n  left: 0;\n}\n\n.vce-lb-nav a {\n  outline: none;\n  background-image: url('data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==');\n}\n\n.vce-lb-prev, .vce-lb-next {\n  height: 100%;\n  cursor: pointer;\n  display: block;\n}\n\n.vce-lb-nav a.vce-lb-prev {\n  width: 34%;\n  left: 0;\n  float: left;\n  background: url('public/prev.png') left 48% no-repeat;\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);\n  opacity: 0;\n  -webkit-transition: opacity 0.6s;\n  -moz-transition: opacity 0.6s;\n  -o-transition: opacity 0.6s;\n  transition: opacity 0.6s;\n}\n\n.vce-lb-nav a.vce-lb-prev:hover {\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);\n  opacity: 1;\n}\n\n.vce-lb-nav a.vce-lb-next {\n  width: 64%;\n  right: 0;\n  float: right;\n  background: url('public/next.png') right 48% no-repeat;\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);\n  opacity: 0;\n  -webkit-transition: opacity 0.6s;\n  -moz-transition: opacity 0.6s;\n  -o-transition: opacity 0.6s;\n  transition: opacity 0.6s;\n}\n\n.vce-lb-nav a.vce-lb-next:hover {\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);\n  opacity: 1;\n}\n\n.vce-lb-data-container {\n  margin: 0 auto;\n  padding-top: 5px;\n  *zoom: 1;\n  width: 100%;\n  -moz-border-radius-bottomleft: 4px;\n  -webkit-border-bottom-left-radius: 4px;\n  border-bottom-left-radius: 4px;\n  -moz-border-radius-bottomright: 4px;\n  -webkit-border-bottom-right-radius: 4px;\n  border-bottom-right-radius: 4px;\n}\n\n.vce-lb-data-container:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n.vce-lb-data {\n  padding: 0 4px;\n  color: #ccc;\n}\n\n.vce-lb-data .vce-lb-details {\n  width: 85%;\n  float: left;\n  text-align: left;\n  line-height: 1.1em;\n}\n\n.vce-lb-data .vce-lb-caption {\n  font-size: 13px;\n  font-weight: bold;\n  line-height: 1em;\n}\n\n.vce-lb-data .vce-lb-number {\n  display: block;\n  clear: left;\n  padding-bottom: 1em;\n  font-size: 12px;\n  color: #999;\n}\n\n.vce-lb-data .vce-lb-close {\n  display: block;\n  float: right;\n  width: 30px;\n  height: 30px;\n  background: url('public/close.png') top right no-repeat;\n  text-align: right;\n  outline: none;\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=70);\n  opacity: 0.7;\n  -webkit-transition: opacity 0.2s;\n  -moz-transition: opacity 0.2s;\n  -o-transition: opacity 0.2s;\n  transition: opacity 0.2s;\n}\n\n.vce-lb-data .vce-lb-close:hover {\n  cursor: pointer;\n  filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);\n  opacity: 1;\n}\n"}});